{
	"last_link_id":161,
	"nodes":[
		{
			"outputs":[
				{
					"name":"wan_t5_model",
					"slot_index":0,
					"links":[
						15
					],
					"label":"wan_t5_model",
					"type":"WANTEXTENCODER",
					"localized_name":"wan_t5_model"
				}
			],
			"color":"#332922",
			"widgets_values":[
				"umt5-xxl-enc-bf16.safetensors",
				"bf16",
				"offload_device",
				"disabled"
			],
			"inputs":[
				
			],
			"flags":{
				
			},
			"type":"LoadWanVideoT5TextEncoder",
			"mode":0,
			"bgcolor":"#593930",
			"size":[
				377.1661376953125,
				130
			],
			"pos":[
				159.8347625732422,
				-515.6986083984375
			],
			"id":11,
			"properties":{
				"cnr_id":"ComfyUI-WanVideoWrapper",
				"ver":"d9b1f4d1a5aea91d101ae97a54714a5861af3f50",
				"Node name for S&R":"LoadWanVideoT5TextEncoder"
			},
			"order":0
		},
		{
			"mode":0,
			"outputs":[
				{
					"name":"lora",
					"links":[
						111
					],
					"label":"lora",
					"type":"WANVIDLORA",
					"localized_name":"lora"
				}
			],
			"size":[
				502.5318298339844,
				176
			],
			"pos":[
				-864.3434448242188,
				-433.909423828125
			],
			"widgets_values":[
				"Wan21_I2V_14B_lightx2v_cfg_step_distill_lora_rank64_official.safetensors",
				1,
				false,
				true
			],
			"inputs":[
				{
					"shape":7,
					"name":"prev_lora",
					"label":"prev_lora",
					"type":"WANVIDLORA",
					"localized_name":"prev_lora"
				},
				{
					"shape":7,
					"name":"blocks",
					"label":"blocks",
					"type":"SELECTEDBLOCKS",
					"localized_name":"blocks"
				}
			],
			"flags":{
				
			},
			"id":75,
			"type":"WanVideoLoraSelect",
			"properties":{
				"cnr_id":"ComfyUI-WanVideoWrapper",
				"ver":"17d48e3e450c7e75f60566e787404cb3d917f48e",
				"Node name for S&R":"WanVideoLoraSelect"
			},
			"order":1
		},
		{
			"mode":0,
			"outputs":[
				{
					"name":"lora",
					"links":[
						85
					],
					"label":"lora",
					"type":"WANVIDLORA",
					"localized_name":"lora"
				}
			],
			"size":[
				406.5719909667969,
				188
			],
			"pos":[
				-327.30914306640625,
				-439.20343017578125
			],
			"widgets_values":[
				"Wan21_PusaV1_LoRA_14B_rank512_bf16.safetensors",
				1.4,
				false,
				true
			],
			"inputs":[
				{
					"shape":7,
					"name":"prev_lora",
					"link":111,
					"label":"prev_lora",
					"type":"WANVIDLORA",
					"localized_name":"prev_lora"
				},
				{
					"shape":7,
					"name":"blocks",
					"label":"blocks",
					"type":"SELECTEDBLOCKS",
					"localized_name":"blocks"
				}
			],
			"flags":{
				
			},
			"id":68,
			"type":"WanVideoLoraSelect",
			"properties":{
				"cnr_id":"ComfyUI-WanVideoWrapper",
				"ver":"17d48e3e450c7e75f60566e787404cb3d917f48e",
				"Node name for S&R":"WanVideoLoraSelect"
			},
			"order":6
		},
		{
			"outputs":[
				{
					"name":"vae",
					"slot_index":0,
					"links":[
						43,
						88
					],
					"label":"vae",
					"type":"WANVAE",
					"localized_name":"vae"
				}
			],
			"color":"#322",
			"widgets_values":[
				"Wan2_1_VAE_bf16.safetensors",
				"bf16"
			],
			"inputs":[
				
			],
			"flags":{
				
			},
			"type":"WanVideoVAELoader",
			"mode":0,
			"bgcolor":"#533",
			"size":[
				372.7727966308594,
				82
			],
			"pos":[
				161.0718994140625,
				-336.79388427734375
			],
			"id":38,
			"properties":{
				"cnr_id":"ComfyUI-WanVideoWrapper",
				"ver":"d9b1f4d1a5aea91d101ae97a54714a5861af3f50",
				"Node name for S&R":"WanVideoVAELoader"
			},
			"order":2
		},
		{
			"outputs":[
				{
					"name":"model",
					"slot_index":0,
					"links":[
						29,
						79
					],
					"label":"model",
					"type":"WANVIDEOMODEL",
					"localized_name":"model"
				}
			],
			"color":"#223",
			"widgets_values":[
				"Wan2_1-T2V-14B_fp8_e4m3fn.safetensors",
				"fp16",
				"fp8_e4m3fn",
				"offload_device",
				"sageattn"
			],
			"inputs":[
				{
					"shape":7,
					"name":"compile_args",
					"link":119,
					"label":"compile_args",
					"type":"WANCOMPILEARGS",
					"localized_name":"compile_args"
				},
				{
					"shape":7,
					"name":"block_swap_args",
					"link":50,
					"label":"block_swap_args",
					"type":"BLOCKSWAPARGS",
					"localized_name":"block_swap_args"
				},
				{
					"shape":7,
					"name":"lora",
					"link":85,
					"label":"lora",
					"type":"WANVIDLORA",
					"localized_name":"lora"
				},
				{
					"shape":7,
					"name":"vram_management_args",
					"label":"vram_management_args",
					"type":"VRAM_MANAGEMENTARGS",
					"localized_name":"vram_management_args"
				},
				{
					"shape":7,
					"name":"vace_model",
					"label":"vace_model",
					"type":"VACEPATH",
					"localized_name":"vace_model"
				},
				{
					"shape":7,
					"name":"fantasytalking_model",
					"label":"fantasytalking_model",
					"type":"FANTASYTALKINGMODEL",
					"localized_name":"fantasytalking_model"
				},
				{
					"shape":7,
					"name":"multitalk_model",
					"label":"multitalk_model",
					"type":"MULTITALKMODEL",
					"localized_name":"multitalk_model"
				}
			],
			"flags":{
				
			},
			"type":"WanVideoModelLoader",
			"mode":0,
			"bgcolor":"#335",
			"size":[
				380.1630859375,
				274
			],
			"pos":[
				157.20700073242188,
				-839.4575805664062
			],
			"id":22,
			"properties":{
				"cnr_id":"ComfyUI-WanVideoWrapper",
				"ver":"d9b1f4d1a5aea91d101ae97a54714a5861af3f50",
				"Node name for S&R":"WanVideoModelLoader"
			},
			"order":8
		},
		{
			"outputs":[
				{
					"name":"images",
					"slot_index":0,
					"links":[
						36
					],
					"label":"images",
					"type":"IMAGE",
					"localized_name":"images"
				}
			],
			"color":"#322",
			"widgets_values":[
				false,
				272,
				272,
				144,
				128,
				"default"
			],
			"inputs":[
				{
					"name":"vae",
					"link":43,
					"label":"vae",
					"type":"WANVAE",
					"localized_name":"vae"
				},
				{
					"name":"samples",
					"link":117,
					"label":"samples",
					"type":"LATENT",
					"localized_name":"samples"
				}
			],
			"flags":{
				
			},
			"type":"WanVideoDecode",
			"mode":0,
			"bgcolor":"#533",
			"size":[
				315,
				198
			],
			"pos":[
				1688.0194091796875,
				-658.5103759765625
			],
			"id":28,
			"properties":{
				"cnr_id":"ComfyUI-WanVideoWrapper",
				"ver":"d9b1f4d1a5aea91d101ae97a54714a5861af3f50",
				"Node name for S&R":"WanVideoDecode"
			},
			"order":13
		},
		{
			"mode":0,
			"outputs":[
				{
					"name":"samples",
					"slot_index":0,
					"links":[
						117
					],
					"label":"samples",
					"type":"LATENT",
					"localized_name":"samples"
				}
			],
			"size":[
				301.9401550292969,
				628.2550048828125
			],
			"pos":[
				1324.05810546875,
				-645.9551391601562
			],
			"widgets_values":[
				6,
				1,
				5,
				46,
				"fixed",
				true,
				"flowmatch_pusa",
				0,
				1,
				"",
				"comfy"
			],
			"inputs":[
				{
					"name":"model",
					"link":29,
					"label":"model",
					"type":"WANVIDEOMODEL",
					"localized_name":"model"
				},
				{
					"name":"text_embeds",
					"link":121,
					"label":"text_embeds",
					"type":"WANVIDEOTEXTEMBEDS",
					"localized_name":"text_embeds"
				},
				{
					"shape":7,
					"name":"image_embeds",
					"link":120,
					"label":"image_embeds",
					"type":"WANVIDIMAGE_EMBEDS",
					"localized_name":"image_embeds"
				},
				{
					"shape":7,
					"name":"samples",
					"label":"samples",
					"type":"LATENT",
					"localized_name":"samples"
				},
				{
					"shape":7,
					"name":"feta_args",
					"label":"feta_args",
					"type":"FETAARGS",
					"localized_name":"feta_args"
				},
				{
					"shape":7,
					"name":"context_options",
					"label":"context_options",
					"type":"WANVIDCONTEXT",
					"localized_name":"context_options"
				},
				{
					"shape":7,
					"name":"cache_args",
					"label":"cache_args",
					"type":"CACHEARGS",
					"localized_name":"cache_args"
				},
				{
					"shape":7,
					"name":"flowedit_args",
					"label":"flowedit_args",
					"type":"FLOWEDITARGS",
					"localized_name":"flowedit_args"
				},
				{
					"shape":7,
					"name":"slg_args",
					"label":"slg_args",
					"type":"SLGARGS",
					"localized_name":"slg_args"
				},
				{
					"shape":7,
					"name":"loop_args",
					"label":"loop_args",
					"type":"LOOPARGS",
					"localized_name":"loop_args"
				},
				{
					"shape":7,
					"name":"experimental_args",
					"label":"experimental_args",
					"type":"EXPERIMENTALARGS",
					"localized_name":"experimental_args"
				},
				{
					"shape":7,
					"name":"sigmas",
					"label":"sigmas",
					"type":"SIGMAS",
					"localized_name":"sigmas"
				},
				{
					"shape":7,
					"name":"unianimate_poses",
					"label":"unianimate_poses",
					"type":"UNIANIMATE_POSE",
					"localized_name":"unianimate_poses"
				},
				{
					"shape":7,
					"name":"fantasytalking_embeds",
					"label":"fantasytalking_embeds",
					"type":"FANTASYTALKING_EMBEDS",
					"localized_name":"fantasytalking_embeds"
				},
				{
					"shape":7,
					"name":"uni3c_embeds",
					"label":"uni3c_embeds",
					"type":"UNI3C_EMBEDS",
					"localized_name":"uni3c_embeds"
				},
				{
					"shape":7,
					"name":"multitalk_embeds",
					"label":"multitalk_embeds",
					"type":"MULTITALK_EMBEDS",
					"localized_name":"multitalk_embeds"
				},
				{
					"shape":7,
					"name":"freeinit_args",
					"label":"freeinit_args",
					"type":"FREEINITARGS",
					"localized_name":"freeinit_args"
				}
			],
			"flags":{
				
			},
			"id":27,
			"type":"WanVideoSampler",
			"properties":{
				"cnr_id":"ComfyUI-WanVideoWrapper",
				"ver":"d9b1f4d1a5aea91d101ae97a54714a5861af3f50",
				"Node name for S&R":"WanVideoSampler"
			},
			"order":12
		},
		{
			"mode":0,
			"outputs":[
				{
					"name":"Filenames",
					"label":"Filenames",
					"type":"VHS_FILENAMES",
					"localized_name":"Filenames"
				}
			],
			"size":[
				697.7421264648438,
				1546.7530517578125
			],
			"pos":[
				2066.0810546875,
				-672.2745971679688
			],
			"widgets_values":{
				"save_output":true,
				"filename_prefix":"WanVideoWrapper_I2V",
				"loop_count":0,
				"pix_fmt":"yuv420p",
				"save_metadata":true,
				"crf":19,
				"trim_to_audio":false,
				"videopreview":{
					"paused":false,
					"hidden":false,
					"params":{
						"filename":"WanVideoWrapper_I2V_00004_xgihv_1753028339.mp4",
						"workflow":"WanVideoWrapper_I2V_00004.png",
						"fullpath":"/data/ComfyUI/personal/445aa9a89d7fa5567450f91c998092da/output/WanVideoWrapper_I2V_00004.mp4",
						"format":"video/h264-mp4",
						"subfolder":"",
						"type":"output",
						"frame_rate":16
					}
				},
				"format":"video/h264-mp4",
				"no_preview":false,
				"frame_rate":16,
				"pingpong":false
			},
			"inputs":[
				{
					"name":"images",
					"link":36,
					"label":"images",
					"type":"IMAGE",
					"localized_name":"images"
				},
				{
					"shape":7,
					"name":"audio",
					"label":"audio",
					"type":"AUDIO",
					"localized_name":"audio"
				},
				{
					"shape":7,
					"name":"meta_batch",
					"label":"meta_batch",
					"type":"VHS_BatchManager",
					"localized_name":"meta_batch"
				},
				{
					"shape":7,
					"name":"vae",
					"label":"vae",
					"type":"VAE",
					"localized_name":"vae"
				}
			],
			"flags":{
				
			},
			"id":30,
			"type":"VHS_VideoCombine",
			"properties":{
				"cnr_id":"comfyui-videohelpersuite",
				"ver":"0a75c7958fe320efcb052f1d9f8451fd20c730a8",
				"Node name for S&R":"VHS_VideoCombine"
			},
			"order":14
		},
		{
			"outputs":[
				{
					"name":"text_embeds",
					"slot_index":0,
					"links":[
						121
					],
					"label":"text_embeds",
					"type":"WANVIDEOTEXTEMBEDS",
					"localized_name":"text_embeds"
				}
			],
			"color":"#332922",
			"widgets_values":[
				"女孩正在跳街舞",
				"Bright tones, overexposed, static, blurred details, subtitles, style, works, paintings, images, static, overall gray, worst quality, low quality, JPEG compression residue, ugly, incomplete, extra fingers, poorly drawn hands, poorly drawn faces, deformed, disfigured, misshapen limbs, fused fingers, still picture, messy background, three legs, many people in the background, walking backwards\"",
				true
			],
			"inputs":[
				{
					"name":"t5",
					"link":15,
					"label":"t5",
					"type":"WANTEXTENCODER",
					"localized_name":"t5"
				},
				{
					"shape":7,
					"name":"model_to_offload",
					"link":79,
					"label":"model_to_offload",
					"type":"WANVIDEOMODEL",
					"localized_name":"model_to_offload"
				}
			],
			"flags":{
				
			},
			"type":"WanVideoTextEncode",
			"mode":0,
			"bgcolor":"#593930",
			"size":[
				453.0067138671875,
				328.0239562988281
			],
			"pos":[
				733.6954345703125,
				-609.0238037109375
			],
			"id":16,
			"properties":{
				"cnr_id":"ComfyUI-WanVideoWrapper",
				"ver":"d9b1f4d1a5aea91d101ae97a54714a5861af3f50",
				"Node name for S&R":"WanVideoTextEncode"
			},
			"order":10
		},
		{
			"mode":0,
			"outputs":[
				{
					"name":"IMAGE",
					"links":[
						144
					],
					"label":"IMAGE",
					"type":"IMAGE",
					"localized_name":"IMAGE"
				},
				{
					"name":"MASK",
					"label":"MASK",
					"type":"MASK",
					"localized_name":"MASK"
				}
			],
			"size":[
				315,
				314
			],
			"pos":[
				-630.792724609375,
				-164.61935424804688
			],
			"widgets_values":[
				"24380605c76a33f5cdc1ddc4063efa6532a792599802a5a205c5d9941b9d9bd2.jpg",
				"image",
				""
			],
			"inputs":[
				
			],
			"flags":{
				
			},
			"id":99,
			"type":"LoadImage",
			"properties":{
				"widget_ue_connectable":{
					
				},
				"Node name for S&R":"LoadImage"
			},
			"order":3
		},
		{
			"mode":0,
			"outputs":[
				{
					"name":"IMAGE",
					"links":[
						150
					],
					"label":"IMAGE",
					"type":"IMAGE",
					"localized_name":"IMAGE"
				},
				{
					"name":"width",
					"links":[
						138
					],
					"label":"width",
					"type":"INT",
					"localized_name":"width"
				},
				{
					"name":"height",
					"links":[
						139
					],
					"label":"height",
					"type":"INT",
					"localized_name":"height"
				},
				{
					"name":"mask",
					"label":"mask",
					"type":"MASK",
					"localized_name":"mask"
				}
			],
			"size":[
				270,
				336
			],
			"pos":[
				-239.68109130859375,
				-156.94778442382812
			],
			"widgets_values":[
				480,
				832,
				"lanczos",
				"crop",
				"0, 0, 0",
				"center",
				16,
				"cpu"
			],
			"inputs":[
				{
					"name":"image",
					"link":144,
					"label":"image",
					"type":"IMAGE",
					"localized_name":"image"
				},
				{
					"shape":7,
					"name":"mask",
					"label":"mask",
					"type":"MASK",
					"localized_name":"mask"
				}
			],
			"flags":{
				
			},
			"id":71,
			"type":"ImageResizeKJv2",
			"properties":{
				"cnr_id":"comfyui-kjnodes",
				"ver":"ad37ce656c13e9abea002b46e3a89be3dba32355",
				"Node name for S&R":"ImageResizeKJv2"
			},
			"order":7
		},
		{
			"mode":0,
			"outputs":[
				{
					"name":"samples",
					"links":[
						148
					],
					"label":"samples",
					"type":"LATENT",
					"localized_name":"samples"
				}
			],
			"size":[
				270,
				242
			],
			"pos":[
				87.87134552001953,
				-149.4158477783203
			],
			"widgets_values":[
				false,
				272,
				272,
				144,
				128,
				0,
				1
			],
			"inputs":[
				{
					"name":"vae",
					"link":88,
					"label":"vae",
					"type":"WANVAE",
					"localized_name":"vae"
				},
				{
					"name":"image",
					"link":150,
					"label":"image",
					"type":"IMAGE",
					"localized_name":"image"
				},
				{
					"shape":7,
					"name":"mask",
					"label":"mask",
					"type":"MASK",
					"localized_name":"mask"
				}
			],
			"flags":{
				
			},
			"id":70,
			"type":"WanVideoEncode",
			"properties":{
				"cnr_id":"ComfyUI-WanVideoWrapper",
				"ver":"17d48e3e450c7e75f60566e787404cb3d917f48e",
				"Node name for S&R":"WanVideoEncode"
			},
			"order":9
		},
		{
			"mode":0,
			"outputs":[
				{
					"name":"image_embeds",
					"links":[
						102,
						120
					],
					"label":"image_embeds",
					"type":"WANVIDIMAGE_EMBEDS",
					"localized_name":"image_embeds"
				}
			],
			"size":[
				272.431640625,
				126
			],
			"pos":[
				389.7049560546875,
				-157.35267639160156
			],
			"widgets_values":[
				832,
				480,
				81
			],
			"inputs":[
				{
					"shape":7,
					"name":"control_embeds",
					"label":"control_embeds",
					"type":"WANVIDIMAGE_EMBEDS",
					"localized_name":"control_embeds"
				},
				{
					"shape":7,
					"name":"extra_latents",
					"link":148,
					"label":"extra_latents",
					"type":"LATENT",
					"localized_name":"extra_latents"
				},
				{
					"widget":{
						"name":"width"
					},
					"name":"width",
					"link":138,
					"label":"width",
					"type":"INT"
				},
				{
					"widget":{
						"name":"height"
					},
					"name":"height",
					"link":139,
					"label":"height",
					"type":"INT"
				}
			],
			"flags":{
				
			},
			"id":78,
			"type":"WanVideoEmptyEmbeds",
			"properties":{
				"cnr_id":"ComfyUI-WanVideoWrapper",
				"ver":"6bc53b771d5d2af316801cb69e2ee10dbf7d18b1",
				"Node name for S&R":"WanVideoEmptyEmbeds"
			},
			"order":11
		},
		{
			"outputs":[
				{
					"name":"torch_compile_args",
					"slot_index":0,
					"links":[
						119
					],
					"label":"torch_compile_args",
					"type":"WANCOMPILEARGS",
					"localized_name":"torch_compile_args"
				}
			],
			"color":"#223",
			"widgets_values":[
				"inductor",
				false,
				"default",
				false,
				64,
				true,
				128
			],
			"inputs":[
				
			],
			"flags":{
				
			},
			"type":"WanVideoTorchCompileSettings",
			"mode":0,
			"bgcolor":"#335",
			"size":[
				390.5999755859375,
				202
			],
			"pos":[
				-368.5930480957031,
				-907.6214599609375
			],
			"id":35,
			"properties":{
				"cnr_id":"ComfyUI-WanVideoWrapper",
				"ver":"d9b1f4d1a5aea91d101ae97a54714a5861af3f50",
				"Node name for S&R":"WanVideoTorchCompileSettings"
			},
			"order":4
		},
		{
			"outputs":[
				{
					"name":"block_swap_args",
					"slot_index":0,
					"links":[
						50
					],
					"label":"block_swap_args",
					"type":"BLOCKSWAPARGS",
					"localized_name":"block_swap_args"
				}
			],
			"color":"#223",
			"widgets_values":[
				10,
				false,
				false,
				true,
				0
			],
			"inputs":[
				
			],
			"flags":{
				
			},
			"type":"WanVideoBlockSwap",
			"mode":0,
			"bgcolor":"#335",
			"size":[
				395.94970703125,
				154
			],
			"pos":[
				-368.9795227050781,
				-662.0819702148438
			],
			"id":39,
			"properties":{
				"cnr_id":"ComfyUI-WanVideoWrapper",
				"ver":"d9b1f4d1a5aea91d101ae97a54714a5861af3f50",
				"Node name for S&R":"WanVideoBlockSwap"
			},
			"order":5
		}
	],
	"extra":{
		"VHS_KeepIntermediate":true,
		"links_added_by_ue":[
			
		],
		"VHS_MetadataImage":true,
		"ue_links":[
			
		],
		"0246.VERSION":[
			0,
			0,
			4
		],
		"VHS_latentpreviewrate":0,
		"VHS_latentpreview":false,
		"frontendVersion":"1.24.1",
		"node_versions":{
			"ComfyUI-WanVideoWrapper":"5a2383621a05825d0d0437781afcb8552d9590fd",
			"ComfyUI-VideoHelperSuite":"0a75c7958fe320efcb052f1d9f8451fd20c730a8",
			"ComfyUI-KJNodes":"a5bd3c86c8ed6b83c55c2d0e7a59515b15a0137f",
			"comfy-core":"0.3.26"
		},
		"ds":{
			"offset":[
				1649.161612218327,
				1317.1224707977372
			],
			"scale":0.3073560549142821
		}
	},
	"groups":[
		
	],
	"links":[
		[
			15,
			11,
			0,
			16,
			0,
			"WANTEXTENCODER"
		],
		[
			29,
			22,
			0,
			27,
			0,
			"WANVIDEOMODEL"
		],
		[
			36,
			28,
			0,
			30,
			0,
			"IMAGE"
		],
		[
			43,
			38,
			0,
			28,
			0,
			"VAE"
		],
		[
			50,
			39,
			0,
			22,
			1,
			"BLOCKSWAPARGS"
		],
		[
			79,
			22,
			0,
			16,
			1,
			"WANVIDEOMODEL"
		],
		[
			85,
			68,
			0,
			22,
			2,
			"WANVIDLORA"
		],
		[
			88,
			38,
			0,
			70,
			0,
			"WANVAE"
		],
		[
			111,
			75,
			0,
			68,
			0,
			"WANVIDLORA"
		],
		[
			117,
			27,
			0,
			28,
			1,
			"LATENT"
		],
		[
			119,
			35,
			0,
			22,
			0,
			"WANCOMPILEARGS"
		],
		[
			120,
			78,
			0,
			27,
			2,
			"WANVIDIMAGE_EMBEDS"
		],
		[
			121,
			16,
			0,
			27,
			1,
			"WANVIDEOTEXTEMBEDS"
		],
		[
			138,
			71,
			1,
			78,
			2,
			"INT"
		],
		[
			139,
			71,
			2,
			78,
			3,
			"INT"
		],
		[
			144,
			99,
			0,
			71,
			0,
			"IMAGE"
		],
		[
			148,
			70,
			0,
			78,
			1,
			"LATENT"
		],
		[
			150,
			71,
			0,
			70,
			1,
			"IMAGE"
		]
	],
	"id":"206247b6-9fec-4ed2-8927-e4f388c674d4",
	"config":{
		
	},
	"version":0.4,
	"last_node_id":110,
	"revision":0
}